package task.jnshu.controller;import org.apache.log4j.Logger;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import task.jnshu.model.Profession;import task.jnshu.model.Student;import task.jnshu.service.ProfessionService;import task.jnshu.service.StudentService;import org.springframework.ui.Model;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.util.List;/** * 本类能在表格中输出全体学生信息 * 输出JSON的格式信息 * 访问技能书主页和职业界面 * Created by Administrator on 7/8/2017. */@Controllerpublic class StudentController {    @Autowired    private StudentService studyService;    @Autowired    ProfessionService professionService;    private static Logger loggerController = Logger.getLogger(StudentController.class);//    @RequestMapping(value="/a/student/select/{userId}",method = RequestMethod.GET)//    public String detail(HttpServletRequest request, HttpServletResponse response, Model model, @PathVariable int id) {//        if(id!= 0) {//            try {//                loggerController.info("查找当前的用户信息");//                loggerController.info("id " + id);//                Student study = this.studyService.studentSelect(id);//                loggerController.info("学生信息： "+ study);//                //将数据绑定到model上，可以传入jsp页面//                model.addAttribute("study", study);//            } catch (Exception e) {//                e.printStackTrace();//                loggerController.error("查询失败" + e.getMessage());//                return "common/errorJson";//            }//            return "student/studentDataliJson";//        }//        else {//            loggerController.info("id " + id);//            return "common/errorParameterJson";//        }//    }    //首页    @RequestMapping(value="/a/home",method = RequestMethod.GET)    public String detail(HttpServletRequest request, HttpServletResponse response, Model model) {        try{            //0为找到工作的状态 ：graduation            //-1是查询所有学员数量：entire            int graduation = studyService.selectStudentNumber(0);            int entire = studyService.selectStudentNumber(null);            loggerController.info("entire: " + entire);            loggerController.info("graduation: " + graduation);            List<Student> students = studyService.studentAll();            model.addAttribute("graduation",graduation);            model.addAttribute("entire",entire);            model.addAttribute("students",students);        }catch (Exception e){            e.printStackTrace();            loggerController.info("e.getMessage :  " + e.getMessage());            return "/common/errorJson";        }        return "task10/task10";    }    //测试自定义Tag时间格式转换页面    @RequestMapping(value="/a/test",method = RequestMethod.GET)    public String jsp(HttpServletRequest request, HttpServletResponse response, Model model) {        return "test";    }    //查询所有学生信息JSON格式    @RequestMapping(value="/a/student/all",method = RequestMethod.GET)    public String studentAll(HttpServletRequest request, HttpServletResponse response, Model model) {        try{            List<Student> students = studyService.studentAll();            loggerController.error("students: "+students);            model.addAttribute("students",students);        }catch (Exception e){            e.printStackTrace();            loggerController.error(e.getMessage());            return "/common/errorJson";        }        return "student/studyAll";    }    //职业介绍界面    @RequestMapping(value="/a/profession",method = RequestMethod.GET)    public String profession(HttpServletRequest request, HttpServletResponse response, Model model) {        try{            //把profession的socialNeed社会需求存入数组            List<Profession> professions = professionService.selectProfessionAll();            int a[] = new int[professions.size()];            for(int i = 0;i<professions.size();i++){                a[i] = professions.get(i).getSocialNeeds();            }            model.addAttribute("professions",professions);            model.addAttribute("a",a);        }catch (Exception e){            e.printStackTrace();            loggerController.error(e.getMessage());            return "/common/errorJson";        }        return "task11/task11";    }    //表格界面    @RequestMapping(value="/a/student/table",method = RequestMethod.GET)    public String studentTable(HttpServletRequest request, HttpServletResponse response, Model model) {        try{            List<Student> studentTable = studyService.studentAll();            loggerController.error("studentTable: "+studentTable);            model.addAttribute("studentTable",studentTable);        }catch (Exception e){            e.printStackTrace();            loggerController.error(e.getMessage());            return "/common/errorJson";        }        return "student/studentTable";    }}